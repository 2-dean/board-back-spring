<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.board.repository.BoardMapper">

    <insert id="saveBoard" parameterType="Board">
        INSERT INTO board (title, content, name)
        VALUES (
                #{title},
                #{content},
                #{name})
    </insert>

    <select id="getBoardList" resultType="Board">
        SELECT idx, title, content, name, save_date, modify_date
        FROM board
    </select>

    <select id="getBoardOne" parameterType="int" resultType="Board">
        SELECT idx, title, content, name, save_date, modify_date
        FROM board
        WHERE idx = #{idx}
    </select>


    <!-- 검색 -->
    <select id="findBoardByTitle" parameterType="String" resultType="Board">
        SELECT idx, title, content, name, save_date, modify_date
        FROM board
        WHERE title LIKE  CONCAT ('%' + #{title} + '%')
    </select>

    <select id="findBoardByName" parameterType="String" resultType="Board">
        SELECT idx, title, content, name, save_date, modify_date
        FROM board
        WHERE name LIKE CONCAT ('%' + #{name} + '%')
    </select>

    <update id="modifyBoard" parameterType="Lin">
        UPDATE board
        SET title = #{title}, content =  #{content}, modify_date = current_timestamp()
        WHERE idx = #{idx}
    </update>

    <delete id="deleteBoard" parameterType="Board">
        DELETE FROM board
        WHERE  idx = #{idx}
    </delete>

</mapper>